<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Urban Alchemy üß™</title>

<style>
  body {
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 0;
  min-height: 100vh;
  width: 100vw;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  text-align: center;
  color: black;
  background-color: #c8f7c5; /* light green fallback */
}



  #topBar {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  button {
    padding: 10px 16px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    background: #4caf50;
    color: white;
    font-size: 14px;
  }

 .scene {
  width: 100vw;
  height: 100vh;
  padding: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background-color: #c8f7c5; /* fallback light green */
  background-size: contain; /* image fits without overflowing */
  background-position: center top; /* move image upward */
  background-repeat: no-repeat;
  border-radius: 0;
}


  }

  .items, .cauldrons {
    display: flex;
    justify-content: center;
    gap: 20px;
    flex-wrap: wrap;
    margin: 20px 0;
  }

  .item {
    background: #e3f2fd;
    border: 2px solid #64b5f6;
    padding: 12px;
    border-radius: 10px;
    cursor: grab;
    width: 150px;
  }

  .cauldron {
    background: #f3e5f5;
    border: 2px dashed #ab47bc;
    padding: 15px;
    border-radius: 12px;
    width: 170px;
  }

  /* Wizard Modal */
  .modal {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.4);
    justify-content: center;
    align-items: center;
  }

  .modal-content {
    background: white;
    padding: 25px;
    border-radius: 14px;
    max-width: 450px;
    text-align: left;
  }
   
  .items-container {
    background: rgba(255, 255, 255, 0.2); /* semi-transparent so bg shows through */
    border-radius: 15px;
    padding: 20px;
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    justify-content: center;
}
  /* HOME SCREEN */
#homeScreen {
  width: 100vw;
  height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  background: linear-gradient(135deg, #c8f7c5, #a8e6a3); /* light green gradient */
  color: #000; /* text color */
}

/* SCENE BACKGROUNDS */



</style>
</head>

<body>

<!-- HOME SCREEN -->
<div id="homeScreen">
  <h1>üß™ Urban Alchemy</h1>
  <p>You are a wizard restoring Georgia cities through sustainability magic.</p>
  <button onclick="startGame()">Start Game</button>
</div>

<!-- GAME SCREEN -->
<div id="gameScreen" style="display:none;">
  <div id="topBar">
    <h2 id="levelTitle"></h2>
    <button onclick="resetGame()">üè† Home</button>
  </div>

  <p id="score">‚ú® Sustainability Power: 0</p>

  <div class="scene" id="scene">
    <h3>üß∫ Items to Sort</h3>
    <div class="items" id="itemsContainer"></div>

    <h3>üß™ Cauldrons</h3>
    <div class="cauldrons">
      <div class="cauldron" data-choice="recycle">‚ôªÔ∏è Recycle</div>
      <div class="cauldron" data-choice="compost">üå± Compost</div>
    </div>
  </div>
</div>

<!-- WIZARD POPUP -->
<div class="modal" id="wizardModal">
  <div class="modal-content">
    <h3>üßô‚Äç‚ôÇÔ∏è Wizard of Sustainability</h3>
    <p id="wizardText"></p>
    <button onclick="closeWizard()">Continue</button>
  </div>
</div>

<script>
/* ---------------- GAME DATA ---------------- */
const levels = [
  {
    name: 'üìç Atlanta',
    bgImage: 'atlanta.jpg',
    items: [
      { emoji: 'ü•§', name: 'Plastic Bottle', category: 'recycle' },
      { emoji: 'üì∞', name: 'Newspaper', category: 'recycle' },
      { emoji: 'üçå', name: 'Banana Peel', category: 'compost' },
      { emoji: 'üì±', name: 'Old Phone', category: 'recycle' },
      { emoji: 'üì¶', name: 'Cardboard Box', category: 'recycle' }
    ]
  },
  {
    name: 'üìç Savannah',
    bgImage: 'savannah.jpg',
    items: [
      { emoji: 'ü•´', name: 'Aluminum Can', category: 'recycle' },
      { emoji: 'üçÉ', name: 'Leaves', category: 'compost' },
      { emoji: 'üêö', name: 'Seaweed', category: 'compost' },
      { emoji: 'ü™Æ', name: 'Old Comb', category: 'recycle' },
      { emoji: 'ü•ï', name: 'Carrot Scraps', category: 'compost' },
      { emoji: 'üõ¢Ô∏è', name: 'Oil Can', category: 'recycle' }
    ]
  },
  {
    name: 'üìç Athens',
    bgImage: 'athens.jpg',
    items: [
      { emoji: 'üçé', name: 'Apple Core', category: 'compost' },
      { emoji: 'ü•™', name: 'Sandwich Wrapper', category: 'recycle' },
      { emoji: '‚òï', name: 'Coffee Cup', category: 'recycle' },
      { emoji: 'üßÄ', name: 'Cheese Rind', category: 'compost' },
      { emoji: 'üìù', name: 'Notebook', category: 'recycle' },
      { emoji: 'üçï', name: 'Pizza Box', category: 'recycle' },
      { emoji: 'ü•õ', name: 'Milk Carton', category: 'recycle' }
    ]
  }
];

let currentLevel = 0;
let score = 0;
let remainingItems = [];
let draggedItem = null;

/* ---------------- GAME FLOW ---------------- */
function startGame() {
  document.getElementById("homeScreen").style.display = "none";
  document.getElementById("gameScreen").style.display = "block";
  score = 0;
  currentLevel = 0;
  loadLevel();
}

function resetGame() {
  document.getElementById("gameScreen").style.display = "none";
  document.getElementById("homeScreen").style.display = "block";
}

/* ---------------- LOAD LEVEL ---------------- */
function loadLevel() {
  const level = levels[currentLevel];
  document.getElementById("levelTitle").innerText = level.name;
  document.getElementById("score").innerText = "‚ú® Sustainability Power: " + score;

  // Set scene background (only one image)
  const scene = document.getElementById("scene");
  scene.style.backgroundImage = `url('images/${level.bgImage}')`;

  remainingItems = shuffle([...level.items]);
  renderItems();
}

/* ---------------- RENDER ITEMS ---------------- */
function renderItems() {
  const container = document.getElementById("itemsContainer");
  container.innerHTML = "";

  remainingItems.forEach(item => {
    const div = document.createElement("div");
    div.className = "item";
    div.draggable = true;
    div.dataset.itemName = item.name;
    div.dataset.category = item.category;
    div.innerText = `${item.emoji} ${item.name}`;

    div.addEventListener("dragstart", () => draggedItem = item);
    container.appendChild(div);
  });
}

/* ---------------- DRAG & DROP ---------------- */
document.querySelectorAll(".cauldron").forEach(cauldron => {
  cauldron.addEventListener("dragover", e => e.preventDefault());
  cauldron.addEventListener("drop", () => {
    const choice = cauldron.dataset.choice;
    judgeMove(draggedItem, choice);
  });
});

/* ---------------- AI WIZARD ---------------- */
function judgeMove(item, choice) {
  if (!item) return;

  const correct = item.category === choice;
  let points = correct ? 20 : 5;
  score += points;

  remainingItems = remainingItems.filter(i => i !== item);

  const message = correct
    ? `‚ú® Excellent transmutation!\nBy placing the ${item.name} into the ${choice} cauldron, you used sustainability magic correctly.`
    : `‚ö†Ô∏è A learning moment!\nThe ${item.name} would have been better suited for a different cauldron.`;

  document.getElementById("wizardText").innerText = message;
  document.getElementById("wizardModal").style.display = "flex";
  document.getElementById("score").innerText = "‚ú® Sustainability Power: " + score;
}

function closeWizard() {
  document.getElementById("wizardModal").style.display = "none";

  if (remainingItems.length === 0) {
    currentLevel++;
    if (currentLevel < levels.length) {
      loadLevel();
    } else {
      alert("üéâ You completed all levels! Sustainability Master!");
      resetGame();
    }
  } else {
    renderItems();
  }
}

/* ---------------- UTILS ---------------- */
function shuffle(array) {
  return array.sort(() => Math.random() - 0.5);
}

</script>

</body>
</html>
