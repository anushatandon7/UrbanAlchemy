<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Urban Alchemy</title>

<link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
  font-family:'Fredoka',sans-serif;
  background:#1a472a;
  min-height:100vh;
}
.header{
  position:fixed;top:20px;left:20px;right:20px;
  display:flex;justify-content:space-between;align-items:center;
  background:white;padding:15px 25px;border-radius:16px;
  z-index:100;
}
.title{font-family:'Playfair Display';font-size:26px}
.score{font-weight:700}
.location-bg{
  position:fixed;inset:0;
  background-size:cover;background-position:center;
  opacity:.4;z-index:-1;
}
.game{
  padding-top:120px;
  max-width:1100px;
  margin:auto;
}
.items{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(90px,1fr));
  gap:25px;
  padding:40px 40px 80px;
  background:rgba(255,255,255,.95);
  border-radius:16px;
}
.item{
  font-size:48px;
  background:#fff3d6;
  border:2px solid #ff6b35;
  border-radius:12px;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:grab;
}
.cauldrons{
  margin-top:60px;
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:80px;
  background:rgba(255,255,255,.95);
  padding:60px;
  border-radius:16px;
}
.cauldron{
  text-align:center;
  padding:40px;
  border-radius:16px;
  border:2px dashed #444;
}
.cauldron.drag-over{
  background:#f0fff0;
}
.wizard{
  position:fixed;
  bottom:30px;right:30px;
  background:#fff3d6;
  padding:20px;
  border-radius:16px;
  display:none;
  max-width:280px;
}
</style>
</head>

<body>

<div class="header">
  <div class="title">‚ú® Urban Alchemy</div>
  <div id="locationName">Atlanta</div>
  <div class="score" id="score">Score: 0</div>
</div>

<div class="location-bg" id="bg"></div>

<div class="game">
  <div class="items" id="items"></div>

  <div class="cauldrons">
    <div class="cauldron" id="recycle">‚ôªÔ∏è Recycle</div>
    <div class="cauldron" id="compost">üå± Compost</div>
  </div>
</div>

<div class="wizard" id="wizard"></div>

<script>
const LEVELS = [
  {
    name:"Atlanta",
    bg:"images/atlanta.jpg",
    items:[
      {e:"ü•§",n:"Plastic Bottle",c:"recycle"},
      {e:"üì∞",n:"Newspaper",c:"recycle"},
      {e:"üçå",n:"Banana Peel",c:"compost"},
      {e:"üì¶",n:"Cardboard Box",c:"recycle"},
      {e:"üçé",n:"Apple Core",c:"compost"}
    ]
  },
  {
    name:"Savannah",
    bg:"images/savannah.jpg",
    items:[
      {e:"ü•´",n:"Aluminum Can",c:"recycle"},
      {e:"üêö",n:"Seaweed",c:"compost"},
      {e:"üçÉ",n:"Leaves",c:"compost"},
      {e:"üß¥",n:"Shampoo Bottle",c:"recycle"},
      {e:"ü•ï",n:"Carrot Scraps",c:"compost"}
    ]
  },
  {
    name:"Athens",
    bg:"images/athens.jpg",
    items:[
      {e:"‚òï",n:"Coffee Cup",c:"recycle"},
      {e:"üçï",n:"Pizza Box",c:"recycle"},
      {e:"üçé",n:"Apple Core",c:"compost"},
      {e:"üìù",n:"Notebook",c:"recycle"},
      {e:"ü•¨",n:"Lettuce Scrap",c:"compost"}
    ]
  },
  {
    name:"Blue Ridge",
    bg:"images/blueridge.jpg",
    items:[
      {e:"üåø",n:"Plant Clippings",c:"compost"},
      {e:"ü•ö",n:"Eggshells",c:"compost"},
      {e:"üçÇ",n:"Leaves",c:"compost"},
      {e:"üîß",n:"Metal Scrap",c:"recycle"},
      {e:"üçØ",n:"Glass Jar",c:"recycle"}
    ]
  }
];

let state = {
  level:0,
  score:0,
  dragged:null
};

function loadLevel(){
  const level = LEVELS[state.level];
  document.getElementById("locationName").textContent = level.name;
  document.getElementById("bg").style.backgroundImage = `url(${level.bg})`;

  const items = document.getElementById("items");
  items.innerHTML = "";
  level.items.forEach(item=>{
    const el = document.createElement("div");
    el.className="item";
    el.textContent=item.e;
    el.draggable=true;
    el.dataset.correct=item.c;
    el.addEventListener("dragstart",()=>state.dragged=item);
    items.appendChild(el);
  });
}

["recycle","compost"].forEach(type=>{
  const el=document.getElementById(type);
  el.addEventListener("dragover",e=>{e.preventDefault();el.classList.add("drag-over")});
  el.addEventListener("dragleave",()=>el.classList.remove("drag-over"));
  el.addEventListener("drop",e=>{
    e.preventDefault();el.classList.remove("drag-over");
    if(!state.dragged) return;

    const correct = state.dragged.c === type;
    state.score += correct ? 20 : 5;
    document.getElementById("score").textContent = `Score: ${state.score}`;
    showWizard(correct, state.dragged.n);

    // level up every 300 points
    const newLevel = Math.floor(state.score / 300);
    if(newLevel > state.level && newLevel < LEVELS.length){
      state.level = newLevel;
      setTimeout(loadLevel,1500);
    }
  });
});

function showWizard(correct,item){
  const wiz=document.getElementById("wizard");
  wiz.textContent = correct
    ? `‚ú® Great choice! ${item} was transmuted correctly.`
    : `üåü Almost! Try a different cauldron for ${item}.`;
  wiz.style.display="block";
  setTimeout(()=>wiz.style.display="none",2500);
}

loadLevel();
</script>
</body>
</html>
